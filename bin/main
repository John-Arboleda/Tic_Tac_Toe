#!/usr/bin/env ruby

class Player
  attr_reader :name
  attr_reader :marker
  def initialize(name, marker)
    @name = name
    @marker = marker
  end
end

class Board 
  @@moves_counter = 1  
  attr_accessor :plays_array
  def initialize (plays_array)
    @plays_array = plays_array
  end

  def print_board 
    col_separator, row_separator = " | ", " +---+---+---+"
    puts row_separator
    3.times do |i|
        print col_separator
        3.times { |j| print "#{@plays_array[j+(i*3)].to_s}" + col_separator}
        puts "\n" << row_separator
    end
  end

  def make_a_move (num, marker)
    if (!num.is_a?(Integer) || !num.between?(1,9))
      puts "Invalid move. Please enter a number between 1 and 9"
    elsif @plays_array[num - 1].is_a?(String)
      puts "Invalid move. Position already taken"
    else
      @plays_array[num - 1] = marker
      @@moves_counter+=1
    end
  end

  def self.counter
    @@moves_counter
  end
end

puts "Enter player 1 name"
player_1 = Player.new(gets.chomp,"X")
puts "Enter player 2 name"
player_2 = Player.new(gets.chomp,"O")
board1 = Board.new([1,2,3,4,5,6,7,8,9])
board1.print_board

def game_flow(user_1, user_2, play_board)

  while(Board.counter <= 9)
    if Board.counter.odd?
      player_turn = user_1
    else
      player_turn = user_2
    end
    puts "#{player_turn.name} please enter a move:"
    move_p = gets.chomp.to_i
    play_board.make_a_move(move_p, player_turn.marker)
    play_board.print_board
    if move_p == 1
      puts "#{player_turn.name} Wins!"
      return puts "Game Over"
    elsif Board.counter > 4
      puts "It's a Draw"
      return puts "Game Over"
    end
  end
end

game_flow(player_1, player_2, board1)
